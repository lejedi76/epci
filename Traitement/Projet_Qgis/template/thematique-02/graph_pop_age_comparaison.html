[% @base_graph%]
<html>
<body>
  <h3>Répartition de la population par grande tranche d'âge entre 2008 et 2013</h3>
  <div id="population_tranche_age"></div>
  <span class="source">Source : Insee, RP 2013</span>
</body>
</html>

<!-- graphique -->
<script>
var chart = c3.generate({
  bindto: '#population_tranche_age',
    size: {
        height: 300,
        // width: 400
    },
    padding:{
      bottom:20,
      top:10,
      left:40,
      right:0
    },
  data: {
      columns: [
        ['2008',  [% "p0_14_m" %],  [% "p15_29_m" %],  [% "p30_44_m" %],  [% "p45_59_m" %],  [% "p60_75_m" %], [% "pplus_75_m" %]],
          ['2013',  [% "p0_14_n" %],  [% "p15_29_n" %],  [% "p30_44_n" %],  [% "p45_59_n" %],  [% "p60_75_n" %], [% "pplus_75_n" %]]
        ]
  , type: 'bar'
  },
  color: {pattern: ['#69ccf0','#1f78b4']},
  bar: {
      width: {
          ratio: 0.5 // this makes bar width 50% of length between ticks
      }
      // or
      //width: 100 // this makes bar width 100px
  },
      grid: {
      y: {
          show: true
        }
  },
   axis: {
      x: {
          type: 'category',
          categories: ['0 à 14 ans', '15 à 29 ans', '30 à 44 ans', '45 à 59 ans', '60 à 75 ans', '+ de 75 ans'],
      },
      y:{
        tick: {
          count : 4,
          format: function (d) { return Math.round(100*d) + '%' ; }
            }
      }
  }
});
</script>